
title: ReactOS
author: abma
date: 21-11-2009

{% extends "post.html" %}
{% block body %}

{% load markup %}
{% filter markdown %}

<p>Dies soll eine kurze Anleitung sein, wie man die aktuellste Version von <a href="http://www.reactos.com/">ReactOS</a> unter Gentoo kompiliert und installiert.</p><h2>Vorwort</h2> <p><br /> Hier eine Schritt-für Schritt Anleitung, um ReactOS unter Gentoo Linux zu compilieren und installieren!<br /> In dem HowTo wird davon ausgegangen, dass auf /dev/hdb1 eine FAT32 eingerichtet ist und diese unter /mnt/d gemountet ist.<br /> Als Bootloader wird grub verwendet.<br />  Ich habe dieses HowTo geschrieben, da es andscheinend keines in deutsch gibt, und auf der ReactOs-Homepage muss man sich auch erst alles auf einigen Webseiten zusammensuchen.<br />  Achtung: ReactOs befindet sich noch im Entwicklungsstadium, am besten ist es ReactOs auf einem Test-Rechner zu installieren (wo auch mal was schiefgehen kann), ansonsten, ihr macht doch hoffentlich immer vor sowas Backups? :-)<br /> Garantie das alles stimmt gibts natürlich keine.<br /> Als ich den Versuch gemacht habe ReactOs zu Installieren war die Version  &quot;Revision 17092&quot;. (Wird nach jedem svn up / svn co ausgegeben, oder man gibt &quot;svn info&quot; in dem reactos svn-Verzeichnis ein)<br />  Außerdem werden ~3GB Platz auf der Festplatte zum compilieren benötigt, der Quellcode schon an sich ist ziemlich gross. Im Moment compiliert ReactOS nur unter einer 32-bit Umgebung, AMD64 wird (noch) nicht unterstüzt. (siehe auch http://www.reactos.org/forum/viewtopic.php?t=1987 )<br />  Für viele ist das selbstcompilieren unnötig, da es auch einen BuildBot gibt, der jede Version compiliert und <a href="http://svn.reactos.org/iso/ zum">Download</a> anbietet.<br />  Feedback bitte an matthias at abma.de<br />  Und jetzt gehts schon los :-)</p><h2>Vorbereitende Massnahmen</h2> <h3>Quellcode runterladen</h3><p>Um den aktuellen Quellcode runterzuladen braucht man einen Subversion client (siehe auch http://www.reactos.org/wiki/Subversion), unter Gentoo installiert man ihn mit <br />  emerge dev-util/subversion<br /> Dann kann man den Quellcode herunterladen:<br />  mkdir ~/reactos<br />  cd ~/reactos<br />  svn co svn://svn.reactos.org/reactos/trunk/reactos <br />  svn co svn://svn.reactos.org/reactos/trunk/rosapps<br />  sollte der Download stehenbleiben, strg+c drücken und dann &quot;svn cleanup&quot; und dann nochmal svn co... eingeben. (kam bei mir mehrmals vor)<br />  freeldr ist schon im modul reactos enthalten, dies ist (noch) fehlerhaft auf der homepage von reactos!<br />  Hat man den Quellcode schon vorher runtergeladen, dann muss man nur in die beiden Verzeichnisse wechseln und jeweils svn up eingeben:<br />  cd ~/reactos/reactos<br />  svn up<br />  cd ~/reactos/rosapps<br />  svn up</p><h3>Benötigte Programme installieren</h3><p>als root und wenn noch nicht geschehen:<br />  emerge xmingw-binutils xmingw-gcc xmingw-runtime xmingw-w32api<br />  unter AMD64 sieht es etwas anders aus:<br />  CFLAGS=&quot;-m32&quot; emerge xmingw-binutils xmingw-gcc xmingw-runtime xmingw-w32api<br />  und dann nocheinmal<br />  emerge xmingw-binutils xmingw-gcc<br /> damit g++ compiliert und installiert wird.</p><h3>Umgebung Einrichten (Gentoo)</h3><p>siehe auch http://www.reactos.org/wiki/Build_Environment<br />   export PATH=$PATH:/opt/xmingw/bin/<br />  export ROS_PREFIX='i386-mingw32msvc'</p><h3>rosapps einbinden</h3><p>symbolischen link in reactos/modules auf rosapps setzen<br />  cd ~/reactos/reactos/modules<br />  ln -s ../../rosapps/<br />  cd ..</p><h2>Konfigurieren</h2> <p><br />  cp config.template.xml config.xml<br /> und dann die datei config.xml editieren. In der Datei kann eingestellt werden, mit was für parametern compiliert wird. (Debugging/Prozessortyp/....)<br />  <br /> rosapps einbinden und kompilieren<br />  make depends</p><h3>Kompilieren</h3><p>und jetzt<br />  make<br /> im reactos Verzeichnis eingeben! Der Vorgang dauert recht lange (je nach Computer). Bei mir hat es ungefähr 30 Minuten gedauert (Athlon XP 1800+)<br />  Sollte es Probleme geben, mit 'make clean' kann man nochmal von vorne anfangen!</p><h3>Installieren</h3><p>mkdir /mnt/d/reactos<br />  export ROS_INSTALL=/mnt/d/reactos<br />  make install<br /> eingeben.<br />  Und jetzt noch den Freeloader auf die Partition kopieren<br />  cp output-i386/boot/freeldr/freeldr/freeldr.sys /mnt/d<br />  cp boot/FREELDR.INI /mnt/d</p><h3>Freeloader konfigurieren</h3><p>In diesem Beispiel soll ReactOS auf /dev/hdb1 installiert werden. /dev/hdb1 ist unter /mnt/d gemountet.<br />  Auszug aus /mnt/d/FREELDR.INI:<br />   [Operating Systems]<br />  ReactOSHDD=&quot;ReactOS (HardDriveD)&quot;<br />   [ReactOSHDD]<br />  BootType=ReactOS<br />  SystemPath=multi(0)disk(0)rdisk(1)partition(1)\reactos<br />  Options=/DEBUGPORT=SCREEN<br />  Kernel=\REACTOS\SYSTEM32\NTOSKRNL.EXE<br />  Hal=\REACTOS\SYSTEM32\HAL.DLL</p><h3>grub konfigurieren</h3><p>Ich verwende grub als Bootloader auf /dev/hda, von diesem aus kann alles gestartet werden, auch ReactOS!<br />  auszug aus /boot/grub/grub.conf<br />  title ReactOS<br />  root (hd1,0)<br />  kernel /freeldr.sys DefaultOS=ReactOS TimeOut=4</p><h3>Reactos starten</h3><p>Zu beachten gibts da eigentlich (noch?) nichts... :-)</p><h2>Fehlermeldungen</h2><p>Kurze übersicht über bekannte Fehlermeldungen und was dann zu tun ist, falls alles nichts hilft einfach ein bisschen auf das nächste svn-update warten, leider geht dort öfters mal was kaputt :-)</p><h3>mingw32-dlltool: Kommando nicht gefunden</h3><p>siehe Umgebung Einrichten</p><h3>make: i386-mingw32msvc-g++: Kommando nicht gefunden</h3><p>Siehe Benötigte Programme installieren</p><h3>make: *** Keine Regel vorhanden, um das Target &quot;subsys/system/devmgr/devmgr.xml&quot;</h3><p>,benötigt von &quot;makefile.auto&quot;, zu erstellen.  Schluss.<br />  Einfach makefile.auto mit<br />  rm makefile.auto<br /> löschen und dann nocheinmal <br />  make<br /> eingeben.</p><h3>i386-mingw32msvc-windres: calc.rsrc.res.tmp: Not a valid WIN32 resource file</h3><p>Es ist vermutlich eine zu alte Version der xmingw-binutils installiert. ReactOS benötigt zum compilieren den &gt;=xmingw-gcc-3.4.4, dieser ist leider noch als unstable (z.B. für amd-64) im Portage makiert.<br /> ein<br />  ACCEPT_KEYWORDS=&quot;~x86&quot; emerge xmingw-binutils xmingw-w32api xmingw-runtime xmingw-gcc<br />  sollte wunder wirken ;-)</p><h2>Fazit</h2> <p><br /> Im vergleich zu meinem ersten Versuch ReactOS zu installieren gab es echt keine Probleme. Der erste Versuch war gescheitert, weil ich es nicht geschafft hatte den Freeloader so zu konfigurieren, dass er von der zweiten Festplatte startet, jedoch mit der aktuellen Version war das kein Problem!<br />  ReactOS selber ist noch sehr Buggy, das merkt man auch, z.B. flimmert der Mouse-Cursor manchmal, Fenster werden teilweise nicht neugezeichnet, viele Anwendungen sind auch einfach noch nicht fertig, aber die Entwicklung schreitet finde ich sehr schnell voran, (hoffentlich) bald ist es wohl auch zu etwas zu gebrauchen!<br />  Netzwerk habe ich noch nicht versucht einzurichten, aber ich glaube, das ist auch noch extrem Buggy, weswegen ich wohl noch etwas warten werde, aber sonst scheint es ganz gut zu funktionieren!</p><h2>Links</h2> <p>&nbsp;</p><ul class="mediawiki"> <li><a href="http://www.reactos.org/">ReactOS</a></li> <li><a href="http://reactosde.re.funpic.de/ ReactOS">Fanseite</a></li> <li><a href="http://www.reactos.org/wiki/index.php/Main_Page ReactOS">Wiki</a> (englisch)</li> <li><a href="http://www.reactos.org/wiki/index.php/HOWTO/install_a_driver HowTo Treiber">installieren</a> (englisch)</li> <li><a href="http://www.reactos.org/wiki/index.php/HOWTO/setup_a_network_connection HowTo Netzwerk">einrichten</a> (englisch)</li> </ul> <h3>Developement</h3> <ul class="mediawiki"> <li><a href="http://www.reactos.org/archives/public/ros-diffs/ The Ros-diffs">Archives</a></li> <li><a href="http://cia.navi.cx/stats/project/ReactOS ReactOS SVN">commits</a></li> <li><a href="http://svn.reactos.org/svn/ ReactOS SVN">Viewer</a></li> <li><a href="http://blogs.reactos.org/ Developers">Blogs</a></li> <li><a href="http://www.reactos.org/forum/viewtopic.php?t=321 Forumsbeitrag zu">ReactOS</a></li> </ul>

{% endfilter %}
{% endblock %}
